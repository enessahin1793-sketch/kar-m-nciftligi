<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Enes â™¥ Yasemin Ã‡iftliÄŸi</title>
<style>
body{margin:0;overflow:hidden;font-family:Arial}
#ui{
 position:fixed;top:10px;left:10px;
 background:rgba(255,255,255,.95);
 padding:10px;border-radius:12px;z-index:10
}
button{margin:2px}
#dialog{
 position:fixed;bottom:90px;left:50%;
 transform:translateX(-50%);
 background:white;padding:10px 20px;
 border-radius:12px;display:none
}
#controls{
 position:fixed;bottom:10px;left:50%;
 transform:translateX(-50%);
 display:flex;gap:10px;z-index:10
}
.ctrl{
 width:60px;height:60px;
 background:rgba(255,255,255,.9);
 border-radius:50%;
 display:flex;align-items:center;justify-content:center;
 font-size:26px;user-select:none
}
</style>
</head>

<body>

<div id="ui">
ğŸ’° <span id="money">200</span><br>
ğŸŒ½ <span id="corn">0</span>
ğŸ¥” <span id="potato">0</span><br>
ğŸ¥› <span id="milk">0</span>
ğŸ¥š <span id="egg">0</span><br><br>

<button onclick="plant('corn')">ğŸŒ½ MÄ±sÄ±r E</button>
<button onclick="plant('potato')">ğŸ¥” Patates E</button><br>
<button onclick="buyCow()">ğŸ„ Ä°nek Al (100)</button>
<button onclick="milkCow()">ğŸ¥› SÃ¼t SaÄŸ</button><br>
<button onclick="buyChicken()">ğŸ” Tavuk Al (50)</button><br>
<button onclick="sellAll()">ğŸ›’ Hepsini Sat</button>
</div>

<div id="dialog"></div>

<!-- MOBÄ°L KONTROLLER -->
<div id="controls">
 <div class="ctrl" data-k="a">â¬…</div>
 <div class="ctrl" data-k="w">â¬†</div>
 <div class="ctrl" data-k="s">â¬‡</div>
 <div class="ctrl" data-k="d">â¡</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
<script>
/* === VERÄ° === */
let money=200,corn=0,potato=0,milk=0,egg=0;
let cows=[],chickens=[];
const tile=1.3;

/* === UI === */
const moneyEl=document.getElementById("money");
const cornEl=document.getElementById("corn");
const potatoEl=document.getElementById("potato");
const milkEl=document.getElementById("milk");
const eggEl=document.getElementById("egg");
function updateUI(){
 moneyEl.textContent=money;
 cornEl.textContent=corn;
 potatoEl.textContent=potato;
 milkEl.textContent=milk;
 eggEl.textContent=egg;
}

/* === THREE === */
const scene=new THREE.Scene();
scene.background=new THREE.Color(0x87ceeb);
const cam=new THREE.PerspectiveCamera(70,innerWidth/innerHeight,.1,1000);
cam.position.set(0,6,6);
const r=new THREE.WebGLRenderer({antialias:true});
r.setSize(innerWidth,innerHeight);
document.body.appendChild(r.domElement);
scene.add(new THREE.AmbientLight(0xffffff,.7));
const sun=new THREE.DirectionalLight(0xffffff,1);
sun.position.set(10,20,10);
scene.add(sun);

/* === ZEMÄ°N === */
for(let x=-6;x<=6;x++)
for(let z=-6;z<=6;z++){
 const t=new THREE.Mesh(
  new THREE.PlaneGeometry(tile,tile),
  new THREE.MeshStandardMaterial({color:0x55aa55})
 );
 t.rotation.x=-Math.PI/2;
 t.position.set(x*tile,0,z*tile);
 scene.add(t);
}

/* === KIZ === */
const girl=new THREE.Group();
const head=new THREE.Mesh(
 new THREE.SphereGeometry(.3,32,32),
 new THREE.MeshStandardMaterial({color:0xffe0bd})
);
head.position.y=1.6;
const hair=new THREE.Mesh(
 new THREE.SphereGeometry(.34,32,32),
 new THREE.MeshStandardMaterial({color:0x000})
);
hair.position.y=1.7;
const body=new THREE.Mesh(
 new THREE.CylinderGeometry(.25,.3,.9,32),
 new THREE.MeshStandardMaterial({color:0xff69b4})
);
body.position.y=1.1;
girl.add(head,hair,body);
scene.add(girl);

/* === HAREKET === */
const keys={};
addEventListener("keydown",e=>keys[e.key]=true);
addEventListener("keyup",e=>keys[e.key]=false);

/* MOBÄ°L */
document.querySelectorAll(".ctrl").forEach(b=>{
 b.addEventListener("touchstart",e=>{
  keys[b.dataset.k]=true;
 });
 b.addEventListener("touchend",e=>{
  keys[b.dataset.k]=false;
 });
});

function move(){
 const s=0.04;
 if(keys.w) girl.position.z-=s;
 if(keys.s) girl.position.z+=s;
 if(keys.a) girl.position.x-=s;
 if(keys.d) girl.position.x+=s;
}

/* === TARIM === */
function plant(type){
 if(money<5)return;
 money-=5;updateUI();
 setTimeout(()=>{
  type==="corn"?corn++:potato++;
  updateUI();
 },5000);
}

/* === Ä°NEK === */
function buyCow(){
 if(money<100)return;
 const cow=new THREE.Mesh(
  new THREE.BoxGeometry(.8,.6,.4),
  new THREE.MeshStandardMaterial({color:0xffffff})
 );
 cow.position.set(4,.3,0);
 scene.add(cow);
 cows.push(cow);
 money-=100;updateUI();
}
function milkCow(){
 cows.forEach(c=>{
  if(c.position.distanceTo(girl.position)<1){
   milk++;updateUI();
  }
 });
}

/* === TAVUK === */
function buyChicken(){
 if(money<50)return;
 const ch=new THREE.Mesh(
  new THREE.SphereGeometry(.25,16,16),
  new THREE.MeshStandardMaterial({color:0xffd700})
 );
 ch.position.set(-4,.25,0);
 scene.add(ch);
 chickens.push(ch);
 money-=50;updateUI();
 setInterval(()=>{egg++;updateUI()},8000);
}

/* === SATIÅ === */
function sellAll(){
 money+=corn*5+potato*6+milk*10+egg*3;
 corn=potato=milk=egg=0;
 updateUI();
}

/* === KAYIT === */
function saveGame(){
 localStorage.setItem("farmSave",JSON.stringify({
  money,corn,potato,milk,egg,
  x:girl.position.x,z:girl.position.z,
  cows:cows.length,chickens:chickens.length
 }));
}
function loadGame(){
 const d=JSON.parse(localStorage.getItem("farmSave"));
 if(!d)return;
 money=d.money;corn=d.corn;potato=d.potato;
 milk=d.milk;egg=d.egg;
 girl.position.x=d.x;girl.position.z=d.z;
 for(let i=0;i<d.cows;i++)buyCow();
 for(let i=0;i<d.chickens;i++)buyChicken();
 updateUI();
}
setInterval(saveGame,5000);
loadGame();

/* === LOOP === */
function anim(){
 requestAnimationFrame(anim);
 move();
 cam.position.x=girl.position.x;
 cam.position.z=girl.position.z+6;
 cam.lookAt(girl.position);
 r.render(scene,cam);
}
anim();
</script>
</body>
</html>
